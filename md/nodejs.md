[TOC]
# ğŸ‘½æ¨¡å—ç³»ç»Ÿ
[`nodeå®˜æ–¹æ–‡æ¡£`](http://nodejs.cn/api/)

> Node.js æœ‰ä¸¤ä¸ªæ¨¡å—ç³»ç»Ÿï¼šCommonJS æ¨¡å—å’Œ ECMAScript æ¨¡å—
## ECMAScriptæ ‡å‡†çš„ç¼ºé™·
1. æ²¡æœ‰æ¨¡å—ç³»ç»Ÿ
2. æ ‡å‡†åº“è¾ƒå°‘
3. æ²¡æœ‰æ ‡å‡†æ¥å£
4. ç¼ºä¹ç®¡ç†ç³»ç»Ÿ
## ç°å®è¦æ±‚
* å¦‚æœç¨‹åºè®¾è®¡çš„è§„æ¨¡è¾¾åˆ°ä¸€å®šç¨‹åº¦ï¼Œåˆ™å¿…é¡»å¯¹å…¶è¿›è¡Œæ¨¡å—åŒ–
* æ¨¡å—å¯ä»¥æœ‰å¤šç§å½¢å¼ï¼Œä½†è‡³å°‘åº”è¯¥æä¾›èƒ½å¤Ÿå°†ä»£ç åˆ†å‰²ä¸ºå¤šä¸ªæºæ–‡ä»¶çš„æœºåˆ¶
* CommonJSçš„æ¨¡å—åŠŸèƒ½å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³è¯¥é—®é¢˜
## CommonJS
* CommonJSè§„èŒƒçš„æå‡ºä¸»è¦æ˜¯å¼¥è¡¥å½“å‰jsæ²¡æœ‰æ ‡å‡†çš„ç¼ºé™·
* CommonJSè§„èŒƒå¸Œæœ›jsä»£ç å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¿è¡Œ
* CommonJSå¯¹æ¨¡å—çš„å®šä¹‰éå¸¸ç®€å•ï¼š
	* æ¨¡å—å®šä¹‰
	* æ¨¡å—å¼•ç”¨
	* æ¨¡å—æ ‡è¯†
### æ¨¡å—å®šä¹‰
* åœ¨nodeç§ï¼Œä¸€ä¸ªjsæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—
* åœ¨nodeä¸­ï¼Œæ¯ä¸€ä¸ªjsæ–‡ä»¶çš„ä»£ç éƒ½æ˜¯ç‹¬ç«‹è¿è¡Œåœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œè€Œä¸æ˜¯å…¨å±€ä½œç”¨åŸŸï¼Œæ‰€ä»¥ä¸€ä¸ªæ¨¡å—ä¸­çš„å˜é‡å’Œå‡½æ•°åœ¨å…¶ä»–æ¨¡å—ä¸­æ— æ³•ç›´æ¥è®¿é—®
* é€šè¿‡exportså‘å¤–æš´éœ²å˜é‡å’Œæ–¹æ³•ï¼ˆexportså‘å¤–éƒ¨æš´éœ²çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼‰
### æ¨¡å—å¼•ç”¨
* åœ¨nodeä¸­ï¼Œé€šè¿‡requireï¼ˆï¼‰å¼•å…¥å¤–éƒ¨æ¨¡å—
* ä½¿ç”¨requireï¼ˆï¼‰å¼•å…¥å¤–éƒ¨æ¨¡å—åï¼Œè¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å³æ˜¯exportsæš´éœ²çš„å¯¹è±¡ï¼Œä¹Ÿä»£è¡¨è¿™ä¸ªè¢«å¼•å…¥çš„æ¨¡å—
> å¼•ç”¨æ­¥éª¤
1. è·¯å¾„åˆ†æ
2. æ–‡ä»¶å®šä½
3. ç¼–è¯‘æ‰§è¡Œ
### æ¨¡å—æ ‡è¯†
* æ¨¡å—æ ‡è¯†å°±æ˜¯æ¨¡å—çš„åå­—ï¼Œä¹Ÿå°±æ˜¯ä¼ é€’ç»™require()çš„å‚æ•°ï¼Œè·¯å¾„å¯ä»¥æ˜¯ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„ï¼Œç›¸å¯¹è·¯å¾„åªèƒ½ä»¥**./**å’Œ**../**å¼€å¤´
### æ¨¡å—åˆ†ç±»
* åº•å±‚C++ç¼–å†™çš„**å†…å»ºæ¨¡å—**
* nodeæä¾›çš„**æ ¸å¿ƒæ¨¡å—**
* ç”¨æˆ·ç¼–å†™çš„**æ–‡ä»¶æ¨¡å—**
### global
* å…¨å±€å¯¹è±¡globaläºç½‘é¡µä¸­çš„windowç±»ä¼¼
* åœ¨å…¨å±€ä¸­åˆ›å»ºçš„å±æ€§ä¼šä½œä¸ºglobalå±æ€§
* åœ¨å…¨å±€ä¸­åˆ›å»ºçš„æ–¹æ³•ä¼šä½œä¸ºglobalçš„æ–¹æ³•
```javascript
a = 10
b = function (){
	console.log("æˆ‘æ˜¯bæ–¹æ³•")
}
console.log(global.a)
global.b()
```
### å¦‚ä½•è¯æ˜jsæ¨¡å—ç‹¬ç«‹è¿è¡Œåœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Ÿ
> å®é™…ç¼–å†™ä»£ç 
```javascript
//argumentå‚æ•°å¯¹è±¡,arguments.calleeè¿”å›å½“å‰å‡½æ•°å†…å®¹
console.log(arguments)
console.log(arguments.callee+"")
```
>å®é™…æ‰§è¡Œä»£ç 
```javascript
function (exports, require, module, __filename, __dirname) {
    //argumentå‚æ•°å¯¹è±¡,arguments.calleeè¿”å›å½“å‰å‡½æ•°å†…å®¹
	console.log(arguments)
	console.log(arguments.callee+"")
}
//åœ¨nodeæ‰§è¡Œæ¨¡å—å‰ï¼Œä¼šé¦–å…ˆä¸ºæ¨¡å—å¥—ä¸Šä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æœ‰5ä¸ªå‚æ•°
//exportsï¼šæ¨¡å—å‘å¤–æš´éœ²çš„å¯¹è±¡
//requireï¼šå¼•ç”¨å¤–éƒ¨æ¨¡å—å‡½æ•°
//moduleï¼šæ¨¡å—è‡ªèº«ï¼Œå…¶ä¸­exportsæ˜¯moduleçš„ä¸€ä¸ªå±æ€§
//__filenameï¼šjsæ–‡ä»¶çš„è·¯å¾„
//__dirnameï¼šjsæ–‡ä»¶å¤¹çš„è·¯å¾„
```
### exportsäºmodule.exportsçš„åŒºåˆ«ä¸è”ç³»
> è”ç³»

`exports = modules.exports = {}`è¿™æ˜¯å†å¼€å§‹æ‰§è¡ŒæŸæ¨¡å—ä»£ç æ—¶è‡ªåŠ¨åŠ ä¸Šçš„

>åŒºåˆ«
* exportsåªèƒ½é€šè¿‡ . çš„å½¢å¼ä½¿ç”¨
* module.exportsæ—¢å¯ä»¥é€šè¿‡ . çš„å½¢å¼ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è¿›è¡Œå¯¹è±¡èµ‹å€¼
* `åŸå› `ï¼šexportsä¿å­˜çš„æ˜¯æŒ‡å‘modues.exportsåœ°å€å€¼ï¼Œå¦‚æœç›´æ¥è¿›è¡Œå¯¹è±¡èµ‹å€¼ï¼Œç›¸å½“äºåˆ›å»ºäº†æ–°çš„å¯¹è±¡ï¼Œæ²¡æœ‰èµ·åˆ°çœŸæ­£ä¿®æ”¹module.exportså¯¹è±¡çš„ç›®çš„, å¯¼è‡´requireå¼•ç”¨ä¸åˆ°exportsé‡Œçš„å€¼
## åŒ…ï¼ˆpackageï¼‰
> CommonJSå…è®¸å°†ä¸€ç»„ç›¸å…³çš„æ¨¡å—ç»„åˆåˆ°ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„å·¥å…·åŒ…
### åŒ…ç»„æˆ
* åŒ…ç»“æ„ï¼šç”¨äºç»„ç»‡åŒ…ä¸­çš„å„ç§æ–‡ä»¶
* åŒ…æè¿°æ–‡ä»¶ï¼šæè¿°åŒ…çš„ç›¸å…³ä¿¡æ¯ï¼Œä»¥ä¾›å¤–éƒ¨è¯»å–
### åŒ…ç»“æ„
> å…¶å®å°±æ˜¯åŒ…è§£å‹ä¹‹åçš„ç›®å½•ç»“æ„
```
package.jsonï¼šæè¿°æ–‡ä»¶ï¼ˆå¿…é¡»ï¼‰
binï¼šå¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶
libï¼šjsä»£ç 
docï¼šæ–‡æ¡£
testï¼šæµ‹è¯•
```
### åŒ…æè¿°æ–‡ä»¶
> ç”¨äºåŒ…çš„ç›¸å…³ä¿¡æ¯çš„æ–‡ä»¶ï¼Œå³package .json
### NPM(Node Package Manager)
> åŒ…ç®¡ç†ç³»ç»Ÿï¼ŒCommonJSè§„èŒƒçš„ä¸€ç§å®ç°

[NPMæ•™ç¨‹](https://blog.csdn.net/u011342720/article/details/81267908)
[npmçš„é•œåƒç®¡ç†å·¥å…·](https://blog.csdn.net/qq_38872934/article/details/105706101)

### NPMåŒ…æœç´¢æµç¨‹
```
åœ¨nodeä¸­ä½¿ç”¨æ¨¡å—åå­—å¼•å…¥æ¨¡å—æ—¶ï¼Œé¦–å…ˆåœ¨node_modulesä¸­æ‰¾ï¼Œ
å¦‚æœæœ‰ç›´æ¥ä½¿ç”¨ï¼Œå¦‚æœæ²¡æœ‰åˆ™å»ä¸Šä¸€çº§ç›®å½•çš„node_modilesä¸­æ‰¾ï¼Œ
å¦‚æœæœ‰ç›´æ¥ä½¿ç”¨ï¼Œå¦‚æœæ²¡æœ‰å†å‘ä¸Šä¸€çº§æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢ï¼Œ
å¦‚æœæ‰¾åˆ°æ ¹ç›®å½•ä»ç„¶æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™æŠ¥é”™ã€‚
```
# ğŸ²æ–‡ä»¶ç³»ç»Ÿ
* nodeé€šè¿‡fsæ¨¡å—æ¥å’Œæ–‡ä»¶ç³»ç»Ÿè¿›è¡Œäº¤äº’
* fsæ¨¡å—æä¾›äº†æ ‡å‡†æ–‡ä»¶è®¿é—®APIï¼Œå¯ä»¥å¯¹æ–‡ä»¶è¿›è¡Œå„ç§æ“ä½œ
* fsæ¨¡å—çš„æ‰€æœ‰æ“ä½œéƒ½æä¾›ä¸¤ç§æ–¹å¼ï¼Œ**åŒæ­¥å’Œå¼‚æ­¥**
* ä½¿ç”¨fsæ¨¡å—ï¼Œéœ€è¦åŠ è½½ï¼Œå³`requir('fs')`
## Buffer(ç¼“å†²åŒº)
- ç»“æ„ä¸Šï¼ŒBufferåƒä¸€ä¸ªå­—èŠ‚æ•°ç»„ï¼Œå› æ­¤Bufferå…ƒç´ çš„å–å€¼èŒƒå›´ä¸º0-255
- å®è´¨ä¸Šï¼ŒBufferç›´æ¥é€šè¿‡C++æ“ä½œå†…å­˜ï¼Œä¸æ˜¯é€šè¿‡jsæ“ä½œå†…å­˜
- æ“ä½œä¸Šï¼Œæ“ä½œæ–¹å¼äºæ“ä½œæ•°ç»„çš„æ–¹å¼ç±»ä¼¼ï¼Œè€Œä¸”ä¸éœ€è¦å¼•å…¥æ¨¡å—ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨
`Bufferçš„å¤§å°ä¸€æ—¦ç¡®å®šå°±ä¸èƒ½æ›´æ”¹ï¼ŒBufferå®é™…ä¸Šæ˜¯å¯¹åº•å±‚å†…å­˜çš„ä¿®æ”¹`
`Bufferçš„ä½¿ç”¨è¿‡ç¨‹å°±æ˜¯å¯¹éœ€è¦ç¼“å­˜å†…å®¹çš„ç¼–ç ä¸è§£ç ï¼Œé»˜è®¤utf8æ ¼å¼`
```javascript
var buf = Buffer.from('Hello,world.')
console.log(buf)
//åˆ›å»ºä¸€ä¸ªæŒ‡å®šå¤§å°çš„Bufferï¼Œä¸æ¨èä½¿ç”¨newçš„æ–¹å¼
//var buf1 = new Buffer(10)
//åˆ›å»ºä¸€ä¸ªæŒ‡å®šå¤§å°çš„Bufferï¼Œæ¨èä½¿ç”¨
var buf1 = Buffer.alloc(20,'Hello,world.')
console.log(buf1)
console.log(buf.toString())
console.log(buf1.toString("utf16le"))
```
## æ–‡ä»¶æ“ä½œä¸¾ä¾‹
| æ¨¡å¼ |                        è¯´æ˜                        |
| :--: | :------------------------------------------------: |
|  r   |              è¯»æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸å­˜åœ¨åˆ™æŠ¥é”™              |
|  r+  |             è¯»å†™æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸å­˜åœ¨åˆ™æŠ¥é”™             |
|  rs  |            åœ¨åŒæ­¥æ¨¡å¼ä¸‹æ‰“å¼€æ–‡ä»¶ç”¨äºè¯»å–            |
| rs+  |            åœ¨åŒæ­¥æ¨¡å¼ä¸‹æ‰“å¼€æ–‡ä»¶ç”¨äºè¯»å†™            |
|  w   |    æ‰“å¼€æ–‡ä»¶ç”¨äºå†™æ“ä½œï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºï¼Œå­˜åœ¨åˆ™æˆªæ–­    |
|  wx  |     æ‰“å¼€æ–‡ä»¶ç”¨äºå†™æ“ä½œï¼Œå¦‚æœ**å­˜åœ¨**åˆ™æ‰“å¼€å¤±è´¥     |
|  w+  |   æ‰“å¼€æ–‡ä»¶ç”¨äºè¯»å†™ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºï¼Œå­˜åœ¨åˆ™æˆªæ–­   |
| wx+  |      æ‰“å¼€æ–‡ä»¶ç”¨äºè¯»å†™ï¼Œå¦‚æœ**å­˜åœ¨**åˆ™æ‰“å¼€å¤±è´¥      |
|  a   |          æ‰“å¼€æ–‡ä»¶ç”¨äºè¿½åŠ å†™ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»º          |
|  ax  |   æ‰“å¼€æ–‡ä»¶ç”¨äºè¿½åŠ å†™ï¼Œå¦‚æœ**è·¯å¾„å­˜åœ¨**åˆ™æ‰“å¼€å¤±è´¥   |
|  a+  |      æ‰“å¼€æ–‡ä»¶ç”¨äºè¯»å–å’Œè¿½åŠ ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»º      |
| ax+  | æ‰“å¼€æ–‡ä»¶ç”¨äºè¯»å–å’Œè¿½åŠ ï¼Œå¦‚æœ**è·¯å¾„å­˜åœ¨**åˆ™æ‰“å¼€å¤±è´¥ |
> åŒæ­¥å†™æ–‡ä»¶
```javascript
var fs = require('fs')
//æ‰“å¼€æ–‡ä»¶(å¦‚æœæ–‡ä»¶ä¸å­˜ï¼Œä¼šè‡ªåŠ¨åˆ›å»º)ï¼Œ
//è¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªNumberç±»å‹çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¯¥æè¿°ç¬¦å¯¹æ–‡ä»¶è¿›è¡Œå„ç§æ“ä½œ
var fd = fs.openSync('hello.txt','w')
//console.log(fd)
//æ–‡ä»¶å†™å…¥
fs.writeSync(fd,'é¹¤å£å¸‚åŒ»ç–—ä¿éšœå±€')
//å…³é—­æ–‡ä»¶
fs.closeSync(fd)
```
> å¼‚æ­¥å†™æ–‡ä»¶
```javascript
var fs = require('fs')
//å¼‚æ­¥æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼Œç»“æœæ•°æ®éƒ½æ˜¯é€šè¿‡å›è°ƒå‡½æ•°å‚æ•°æ¥æ”¶
//å¯ä»¥é€šè¿‡argumentså¯¹è±¡æŸ¥çœ‹å‚æ•°
//æ‰“å¼€æ–‡ä»¶
fs.open('hello.txt','w',function(err,fd){
	console.log(arguments)
	if(!err){
		//æ–‡ä»¶å†™å…¥
		fs.write(fd,'é¹¤å£å¸‚åŒ»ç–—ä¿éšœå±€',function(err,written,string){
			console.log(arguments)
		})
		//å…³é—­æ–‡ä»¶
		fs.close(fd,function(err){
			console.log(arguments)
		})
	}else{
		console.log(err)
	}	
})
```
> ç®€å•æ–‡ä»¶å†™å…¥
```javascript
//fs.writeFile(file,data[,options],callback)
//fs.writeFileSync(file,data[,options])
//file:æ–‡ä»¶è·¯å¾„
//dataï¼šè¦å†™å…¥çš„æ•°æ®
//optionsï¼šé€‰é¡¹ï¼Œå¯ä»¥å¯¹å†™å…¥è¿›è¡Œé…ç½®
//callbackï¼šå›è°ƒå‡½æ•°
var fs = require('fs')
//ç›´æ¥å†™å…¥
fs.writeFile('hello.txt','è¿™æ˜¯å†™å…¥çš„å†…å®¹******',function(err){
	if(!err){
		console.log('success')
	}
})
//ç®€å•æ–‡ä»¶å†™å…¥æ˜¯å¯¹å‰é¢æ–‡ä»¶å†™å…¥è¿‡ç¨‹çš„ä¸€ä¸ªå°è£…
```
> æµå¼æ–‡ä»¶å†™å…¥

`åŒæ­¥ã€å¼‚æ­¥ã€ç®€å•æ–‡ä»¶å†™å…¥éƒ½ä¸é€‚åˆå¤§æ–‡ä»¶å†™å…¥ï¼Œæ€§èƒ½è¾ƒå·®ï¼Œå®¹æ˜“å¯¼è‡´å†…å­˜æº¢å‡º`
```javascript
var fs = require('fs')
//åˆ›å»ºä¸€ä¸ªå¯å†™æµã€‚fs.createWriteStream(path[,options])
var ws = fs.createWriteStream('hello.txt')
//å¯ä»¥é€šè¿‡ç›‘å¬openå’Œcloseäº‹ä»¶æ¥ç›‘å¬æµçš„æ‰“å¼€å’Œå…³é—­
//once()ä¸ºå¯¹è±¡ç»‘å®šä¸€ä¸ªä¸€æ¬¡æ€§äº‹ä»¶ï¼Œè§¦å‘ä¸€æ¬¡åè‡ªåŠ¨å¤±æ•ˆ
ws.once('open',function(){
	console.log('æµæ‰“å¼€äº†~~~')
})
ws.once('close',function(){
	console.log('æµå…³é—­äº†~~~')
})
//å‘æµé‡Œå†™å†…å®¹
ws.write('é€šè¿‡å¯å†™æµå†™å…¥çš„å†…å®¹')
ws.write('é¹¤å£å¸‚åŒ»ç–—ä¿éšœå±€')
ws.write('æµå¼æ–‡ä»¶å†™å…¥')
ws.write('hello,wrold!')
//å…³é—­æµ
//ws.close()//å…³é—­æµå‡ºç«¯å£
ws.end()//å…³é—­æµå…¥ç«¯å£
```
> ç®€å•æ–‡ä»¶è¯»å–
```javascript
var fs = require('fs')
//fs.readFile(path[,options],callback)
//fs.readFileSyns(path[,options])
fs.readFile('hello.txt',function(err,data){
	//console.log(arguments)
	if(!err){
		console.log(data.toString())
	}else{
		console.log(err)
	}
})
```
>æµå¼æ–‡ä»¶è¯»å–
```javascript
var fs = require('fs')
//é€‚ç”¨äºè¯»å–è¾ƒå¤§çš„æ–‡ä»¶ï¼Œå¯ä»¥åˆ†å¤šæ¬¡è¯»å–åˆ°å†…å­˜ä¸­
//åˆ›å»ºä¸€ä¸ªå¯è¯»æµ
var rs = fs.createReadStream('img1.png')
//åˆ›å»ºä¸€ä¸ªå¯å†™æµ
var ws = fs.createWriteStream('imgCopy.png')
//ç›‘å¬æµçš„å¼€å¯å’Œå…³é—­
rs.once('open',function(){
	console.log('å¯è¯»æµå¼€å¯äº†~~~')
})
rs.once('close',function(){
	console.log('å¯è¯»æµå…³é—­äº†~~~')
})
ws.once('open',function(){
	console.log('å¯å†™æµå¼€å¯äº†~~~')
})
ws.once('close',function(){
	//å…³é—­å¯å†™æµ
	console.log('å¯å†™æµå…³é—­äº†~~~')
	//å½“æµä¸­æ²¡æœ‰æ›´å¤šæ•°æ®å¯ä¾›æ¶ˆè´¹æ—¶ï¼Œåˆ™ä¼šè§¦å‘ 'end' äº‹ä»¶ã€‚
	//é™¤éæ•°æ®è¢«å®Œå…¨åœ°æ¶ˆè´¹ï¼Œå¦åˆ™ä¸ä¼šè§¦å‘ 'end' äº‹ä»¶ã€‚ 
    //è¿™å¯ä»¥é€šè¿‡å°†æµåˆ‡æ¢åˆ°æµåŠ¨æ¨¡å¼æ¥å®ç°ï¼Œæˆ–è€…é€šè¿‡é‡å¤è°ƒç”¨ stream.read() ç›´åˆ°æ‰€æœ‰æ•°æ®éƒ½è¢«æ¶ˆè´¹å®Œã€‚
	ws.end()
})
//è¦è¯»å–å¯è¯»æµä¸­çš„æ•°æ®ï¼Œå¿…é¡»ç»‘å®šä¸€ä¸ªdataäº‹ä»¶
//ç»‘å®šdataäº‹ä»¶åä¼šè‡ªåŠ¨è¯»å–æ•°æ®ï¼Œå¹¶é€šè¿‡å›è°ƒå‡½æ•°æ¥æ”¶æ•°æ®
//on()ä¸ºå¯¹è±¡æ·»åŠ ç›‘å¬äº‹ä»¶ï¼Œä¼šå¯¹è¯¥å¯¹è±¡è¿›è¡ŒæŒç»­ç›‘å¬
rs.on('data',function(data){
	//æ¯æ¬¡æœ€å¤šè¯»å–65536ä¸ªå­—èŠ‚
	//console.log(arguments)
	//å°†è¯»å–åˆ°çš„å†™åˆ°å¯å†™æµ
	ws.write(data)
})
```
> ä½¿ç”¨ç®¡é“
```javascript
var fs = require('fs')
//é€‚ç”¨äºè¯»å–è¾ƒå¤§çš„æ–‡ä»¶ï¼Œå¯ä»¥åˆ†å¤šæ¬¡è¯»å–åˆ°å†…å­˜ä¸­
//åˆ›å»ºä¸€ä¸ªå¯è¯»æµ
var rs = fs.createReadStream('img1.png')
//åˆ›å»ºä¸€ä¸ªå¯å†™æµ
var ws = fs.createWriteStream('imgCopy.png')
//ç›‘å¬æµçš„å¼€å¯å’Œå…³é—­
rs.once('open',function(){
	console.log('å¯è¯»æµå¼€å¯äº†~~~')
})
rs.once('close',function(){
	console.log('å¯è¯»æµå…³é—­äº†~~~')
})
ws.once('open',function(){
	console.log('å¯å†™æµå¼€å¯äº†~~~')
})
ws.once('close',function(){
	console.log('å¯å†™æµå…³é—­äº†~~~')
})
//pipe()å¯ä»¥å°†å¯è¯»æµä¸­çš„æ•°æ®ç›´æ¥è¾“å‡ºåˆ°å¯å†™æµ
rs.pipe(ws)
```